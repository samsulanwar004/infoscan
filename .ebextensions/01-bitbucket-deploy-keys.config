commands:
    300-composer-update:
        command: "export HOME=/root && export COMPOSER_HOME=/root && /usr/bin/composer.phar self-update"
option_settings:
    - namespace: aws:elasticbeanstalk:application:environment
        option_name: COMPOSER_HOME
        value: /root
    - namespace: aws:elasticbeanstalk:application:environment
        option_name: HOME
        value: /root
container_commands:
    400-move-priv-key:
        command: "mv ~root/.ssh/id_rsa ~root/.ssh/id_rsa.bak; cp .ebextensions/bin/id_rsa ~root/.ssh/id_rsa; chmod 400 ~root/.ssh/id_rsa;"
    401-move-pub-key:
        command: "mv ~root/.ssh/id_rsa.pub ~root/.ssh/id_rsa.pub.bak; cp .ebextensions/bin/id_rsa.pub ~root/.ssh/id_rsa.pub; chmod 400 ~root/.ssh/id_rsa.pub;"
    402-install-composer:
        command: "composer.phar install"